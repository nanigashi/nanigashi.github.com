(function(a){var t=a.fancybox;t.helpers.thumbs={defaults:{width:50,height:50,position:"bottom",source:function(t){var i;if(t.element){i=a(t.element).find("img").attr("src")}if(!i&&t.type==="image"&&t.href){i=t.href}return i}},wrap:null,list:null,width:0,init:function(t,h){var r=this,i,n=t.width,l=t.height,e=t.source;i="";for(var s=0;s<h.group.length;s++){i+='<li><a style="width:'+n+"px;height:"+l+'px;" href="javascript:jQuery.fancybox.jumpto('+s+');"></a></li>'}this.wrap=a('<div id="fancybox-thumbs"></div>').addClass(t.position).appendTo("body");this.list=a("<ul>"+i+"</ul>").appendTo(this.wrap);a.each(h.group,function(o){var t=h.group[o],i=e(t);if(!i){return}a("<img />").load(function(){var t=this.width,i=this.height,h,e,s;if(!r.list||!t||!i){return}h=t/n;e=i/l;s=r.list.children().eq(o).find("a");if(h>=1&&e>=1){if(h>e){t=Math.floor(t/e);i=l}else{t=n;i=Math.floor(i/h)}}a(this).css({width:t,height:i,top:Math.floor(l/2-i/2),left:Math.floor(n/2-t/2)});s.width(n).height(l);a(this).hide().appendTo(s).fadeIn(300)}).attr("src",i).attr("title",t.title)});this.width=this.list.children().eq(0).outerWidth(true);this.list.width(this.width*(h.group.length+1)).css("left",Math.floor(a(window).width()*.5-(h.index*this.width+this.width*.5)))},beforeLoad:function(t,i){if(i.group.length<2){i.helpers.thumbs=false;return}i.margin[t.position==="top"?0:2]+=t.height+15},afterShow:function(t,i){if(this.list){this.onUpdate(t,i)}else{this.init(t,i)}this.list.children().removeClass("active").eq(i.index).addClass("active")},onUpdate:function(t,i){if(this.list){this.list.stop(true).animate({left:Math.floor(a(window).width()*.5-(i.index*this.width+this.width*.5))},150)}},beforeClose:function(){if(this.wrap){this.wrap.remove()}this.wrap=null;this.list=null;this.width=0}}})(jQuery);